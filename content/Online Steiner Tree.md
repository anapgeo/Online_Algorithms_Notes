

## Το πρόβλημα

Έστω ότι σας δίνεται ένα **πλήρες**(δηλαδή όλοι οι κόμβοι συνδέονται με τους υπόλοιπους με μια ακμή), μη κατευθυνόμενο γράφημα $G=(V,E)$ με μη αρνητικά κόστη στις ακμές. Επίσης κάνουμε την υπόθεση πως τα κόστη του γραφήματος ικανοποιούν την τριγωνική ανισότητα. Με απλά λόγια αυτό σημαίνει πως αν έχουμε 3 κόμβους, έστω $a,b,c \in V$ τότε ισχύει πως:
- $c(a,a)=c(b,b)=c(c,c)=0$
- $c(a,b)+c(b,c) \leq c(a,c)$ για κάθε $a,b,c \in V$

Δέχεστε μια ακολουθία από τερματικούς κόμβους $t_1,t_1,...,t_k \in V$ οι οποίοι εμφανίζονται με online τρόπο(δηλαδή ένας-ένας). Το ζητούμενο από εσας είναι να συνδέσετε τα τερματικά καθώς εμφανίζονται χρησιμοποιώντας τις ακμές που έχετε στη διάθεση σας. Όταν ένα νέο τερματικό εμφανίζεται καλείστε να αποφασίσετε(ο online αλγόριθμος που θα σχεδιάσετε) πως το τερματικό αυτό θα συνδεθεί με τα υπόλοιπα. Με τον τρόπο αυτό δημιουργείτε ένα υπογράφημα που συνδέει του κόμβους που έχετε μέχρις στιγμής. Στόχος είναι να δημιουργήσετε το φθηνότερο δυνατό υπογράφημα που συνδέει όλους τους τερματικούς κόμβους που λάβατε.

Η απόδοση του online αλγορίθμου σας αυτού θα συγκριθεί με το βέλτιστο offline αλγόριθμο ο οποίος υπολογίζει και αυτός το φθηνότερο δυνατό υπογράφημα, Επειδή τα κόστη είναι μη αρνητικά, το υπογράφημα με το μικρότερο κόστος θα πρέπει να είναι ένα δέντρο T. Το κόστος του δέντρου αυτού θα είναι το άθροισμα των κοστών των ακμών του: $c(T)=\sum_{e\in T}c_e$

![[Screenshot_2.png]]

> Σημείωση: Το minimum Steiner Tree πρόβλημα είναι NP-hard πρόβλημα, σε αντίθεση με το συγγενές πρόβλημα του ελάχιστου συνδετικού δένδρου (minimum Spanning Tree) που επιλύεται σε πολυωνυμικό χρόνο (π.χ. Kruskal, Prim,…)






## Ο άπληστος αλγόριθμος 

Μια πιθανή λύση στο πρόβλημα του online steiner tree είναι να ακολουθήσουμε την εξής απλή και greedy λογική: Από τη στιγμή που μας έρθει ένας κόμβος(τερματικό) εξετάζουμε τα κόστη από κάθε κόμβο που έχουμε ήδη λάβει και συνδέουμε τον νέο κόμβο με το υπόλοιπο υπογράφημα μέσω της ακμής με το μικρότερο κόστος 

Η λογική αυτή φυσικά αρχίζει να υλοποιείται από τον δεύτερο κόμβο και μετά.

Σε μορφή ψευδοκώδικα έχουμε τον εξής αλγόριθμο:


![[Screenshot_2 1.png]]

Παρακάτω φαίνεται και ένα αποτέλεσμα του αλγορίθμου 

![[Screenshot_3.png]]



## Ανάλυση του αλγορίθμου

### Το θεώρημα του Euler 

> Θεώρημα: Σε ένα γράφημα $G=(V,E)$, υπάρχει ένας **κύκλος Euler**(ένα μονοπάτι που ξεκινά από ένα κόμβο και ξανακαταλήγει σε αυτόν ενώ επισκέπτεται κάθε άλλο κόμβο τουλάχιστον μια φορά ενώ μια φορά κάθε ακμή του γραφήματος) αν και μόνον αν:
> - Το **γράφημα** είναι **συνεκτικό**(δηλαδή για κάθε ζεύγος κόμβων υπάρχει μονοπάτι που τους συνδέει)
> - Όλοι οι **κόμβοι** έχουν **άρτιο βαθμό**(δηλαδή από κάθε κόμβο συνδέεται άρτιος αριθμός ακμών)


### Λήμμα 

> Λήμμα. Για κάθε $i=1,...,k-1$, η $i$-οστή πιο ακριβή ακμή του Τ έχει κόστος το πολύ όπου $OPT$ είναι το κόστος του βέλτιστου offline Steiner δένδρου (που γνωρίζει τα $k$ τερματικά εξαρχής).

Δηλαδή η πιο ακριβή ακμή του T έχει κόστος το πολύ $2OPT$, η δεύτερη πιο ακριβή έχει κοστος το πολύ $OPT$, η τρίτη πιο ακριβή έχει κοστος το πολύ $2OPT/3$ …

Απόδειξη 


- Έστω $Τ^*$ το βέλτιστο offline Steiner δέντρο
- Έστω $H$ το γράφημα που προκύπτει από το $Τ^*$ αν διπλασιάσουμε τις ακμές του $Τ^*$
- αφού ο $|Η|$(βαθμός του $H$) είναι άρτιο, υπάρχει ένας κύκλος Euler $C$ του $H$
- Επομένως το κόστος του $H$ είναι $\sum_{e\in H}c_e=2OPT$ 
- Ο $C$ επισκέπτεται κάθε τερματικό κόμβο τουλάχιστον μια φορά, ενώ μπορεί να επισκέπτεται και μη τερματικούς κόμβους

>Σημείωση: Τερματικούς εννούμε τους κόμβους που μας δίνονται στο online πρόβλημα ενώ μη τερματικοί είναι οι υπόλοιποι κόμβοι του γράφου

- Ας ορίσουμε ως κόστος του τερματικού $t_j$ με $j>1$ ως το κόστος σύνδεσης του $j$ με τον κόμβο $t_k$ με $k<j$ με τον οποίο συνδέθηκε κατα την εκτέλεση του άπληστου αλγορίθμου
- Έστω $s_1,...,s_i$ οι $i$ τερματικοί κόμβοι με τα μεγαλύτερα κόστη
- O $C$ επισκέπτεται τον κάθε τερματικό κόμβο τουλάχιστον μια φορά


 Έστω $C_i$ ο κύκλος που προκύπτει από τον $C$ αν χρησιμοποιήσουμε τις συντομεύσεις** για τις επαναλαμβανόμενες επισκέψεις κάποιου κόμβου:
 - Παρατηρούμε ότι η σειρά επίσκεψης των τερματικών κόμβων στο $C_i$ είναι η ίδια με την σειρά της πρώτης επίσκεψης των κόμβων στο $C$
 - Λόγω της τριγωνικής ανισότητας οι συντομεύσεις έχουν το πολύ το ίδιο κόστος με το μονοπάτι του $C$

Επειδή ο κύκλος $C_i$ έχει μόνο $i$ ακμές το κόστος της φθηνότερης ακμής είναι μικρότερο ή ίσο από τον μέσο όρο των κοστών του $C_i$







